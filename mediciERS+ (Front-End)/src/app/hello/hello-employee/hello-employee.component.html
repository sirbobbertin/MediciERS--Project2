<app-header></app-header>
<link href="/assets/css/nucleo-icons.css" rel="stylesheet">

<div>
    <div class="container">
        <div class="jumbotron">
            <h1>Hello, {{ userInfo.userFirstName }}!</h1>
            <p>Welcome to Medici Expense Reimbursement System</p>
            <hr class="my-4">
            <p>Click on the submit reimbursement button below to get started!</p>
            <p class="lead">
                <button type="button" class="btn btn-primary mb-2" (click)="toggleAdd()">
                    Submit Reimbursement
                </button>
            </p>
            <div class="container">
                <div *ngIf="flag">
                    <form class="form-inline tm-5">
                        <label for="userId" class="mb-2 mr-sm-2">User ID:</label>
                        <input type="text" class="form-control mb-2 mr-sm-2" id="userId" placeholder="Enter User ID"
                            name="UserId" [(ngModel)]="userInfo.userId" readonly>
                        <label for="rbDate" class="mb-2 mr-sm-2">Date:</label>
                        <input type="date" class="form-control mb-2 mr-sm-2" id="rbDate" placeholder="Enter Date"
                            name="ReimbursementDate" [(ngModel)]="newRequest.rbDate" required>
                        <label for="rbAmount" class="mb-2 mr-sm-2">Amount:</label>
                        <input type="text" class="form-control mb-2 mr-sm-2" id="rbAmount" placeholder="Enter Amount"
                            name="ReimbursementAmount" [(ngModel)]="newRequest.rbAmount" required>
                        <div class="col-8">
                            <label class="btn btn-default p-0">
                                <input type="file" (change)="selectFile($event)" required />
                            </label>
                        </div>
                        <div *ngIf="message" class="alert alert-success" role="alert">{{ message }}</div>
                        <div *ngIf="errorMsg" class="alert alert-danger" role="alert">{{ errorMsg }}</div>
                        <button type="button" class="btn btn-primary mb-2" (click)="addReimbursement()">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>Your Recent Submissions : Pending Manager Review</h2>
        <div></div>
        <table class="table table-striped table-condensed">
            <thead class="thead-dark">
                <tr>
                    <th>Reimbursement ID</th>
                    <th>User ID</th>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Cancel</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let reimbursement of PendingRequests">
                    <td>{{ reimbursement.rbId }}</td>
                    <td>{{ reimbursement.userId}}</td>
                    <td>{{ reimbursement.rbDate }}</td>
                    <td>{{ reimbursement.rbAmount }}</td>
                    <td>{{ reimbursement.rbStatus | uppercase }}</td>
                    <td>
                        <button type="button" class="btn btn-danger btn-sm" (click)="deleteRequest(reimbursement.rbId)">
                            <i class="tim-icons icon-trash-simple"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>